**💡 IPSec이란?**

인터넷에서 데이터를 보호하기 위한 프로토콜 스위트.

IP 패킷 암호화, 인증, 보호를 위한 다양한 프로토콜과 알고리즘 포함함.

<br/>

**💡 IPSec의 주요 기능은?**

1. 인증 ; Authentication : 패킷이 변조되지 않았음을 확인하기 위해 인증 매커니즘 제공
2. 기밀성 ; Confidentiality : 패킷 전송 중 제 3자가 패킷의 내용 볼 수 없도록 함.
3. 무결성 ; Integrity : 체크썸 및 메시지 다이제스트 등 매커니즘 사용 → 패킷 내용이 변경 X 보장
4. Secure Turnnel : 가상 사설망 VPN을 구축하기 위해 보안 터널 제공. 안전하게 데이터 전송하기 위해 패킷 암호화하고 인증하며, 무결성을 보장함.
    

![image](https://github.com/JeeeunOh/Major-Study/assets/65931227/62747b32-c567-425d-a013-9aa74a00986d)


→ Tunnel Mode를 통해 어떤 Network에서 어떤 Network로 보내는지 알 수 없게 할 수 있음.

![image](https://github.com/JeeeunOh/Major-Study/assets/65931227/c0a13754-32fc-4cf6-969c-412273a25193)


→ IPSec Header : IP 패킷에 추가되는 추가 정보를 담은 부분

- IPSec 터널 모드 설정
- 무결성 검사용 값 포함 ( ex. HMAC값 )

<br/>

**💡 ESP란?**

IPSec 프로토콜 스위트에서 사용되는 보안 프로토콜 중 하나이다.

IP 패킷을 캡슐화해서 안전하게 전송하는 역할을 함.

→ IP 패킷의 내용을 암호화하고, 패킷의 무결성을 보장함.

<br/>

**💡 ESP의 padding으로 뭘 하나?**

원래 데이터가 블록 크기의 배수가 아닌 경우, 원래 데이터 크기를 블록 크기에 맞추기 위해 사용.

→ 데이터 크기를 암호화 알고리즘의 요구사항에 맞게 맞춤. : **데이터 일관성** 보장

+) **데이터 무결성** 보장에도 사용됨. 악의적인 공격자가 패딩을 조작해 데이터를 변경할 수 없도록 방지

<br/>

**💡 AH 프로토콜이란?**

IPSec 프로토콜 스위트에서 사용되는 보안 프로토콜 중 하나. IP 패킷의 무결성과 인증을 제공하는 역할을 함.

기능 )

- 데이터 무결성 보장 : HMAC-MD5 / HMAC-SHA
- 인증 : 패킷이 신뢰할 수 있는 송신자에 의해 생성되었는지 확인

<br/>

**💡 Anti-Replay Service란??**

중복 패킷 재전송 공격을 방지하기 위한 알고리즘.

공격자가 네트워크 상에서 이미 전송된 패킷을 재전송하여 공격을 시도하는 것을 말함.

**방지 방법 )**

패킷의 시퀀스 번호를 사용하여 중복 패킷을 식별하고 필터링.

패킷에 고유한 시퀀스 번호 할당해 패킷 헤더에 추가됨

<br/>

**💡 Transport Mode란??**

원본 IP 패킷의 페이로드 부분만 암호화하고 IPSec 헤더가 추가됨. IP 헤더는 변하지 않음.

→ 원본 IP 패킷의 일부분만을 보호함.

→ 호스트 간 통신의 보안을 강화하기 위해 사용될 수 있음.

장점 ) 효율성 높음.

ex. 호스트간 통신, 호스트 방화벽 등 가깝고 신뢰할 수 있는 네트워크에서 사용됨.

<br/>

**💡 Tunnel Mode란???**

원본 IP 패킷 전부가 암호화되고 ~~IPSec 헤더와 페이로드로 감싸지고,~~ 새로운 IP 헤더가 추가됨.

목적지에서는 터널 모드를 해제하여 원래의 IP 패킷을 복원함.

→ 원본 IP 패킷을 캡슐화하여 보호하는 방식.

장점 ) 보안 높음.

ex. VPN : 원격 위치 간 안전한 통신 제공 위해

네트워크 간 통신에는 터널 모드 / 보안 요구가 상대적으로 낮은 경우 전송 모드

![image](https://github.com/JeeeunOh/Major-Study/assets/65931227/b1d95551-4bdb-4539-bce7-dc770f79424e)

<br/>

**💡 IPSec 키 교환 매커니즘**

AH, ESP를 위한 키 2개가 필요함.

이 키를 어떻게 관리할 것인가?? 에 대한 매커니즘 필요

→ Oakley, ISAKMP로 IPSec 협상을 위한 프로토콜과 키 교환 매커니즘을 정의함.

<br/>

**💡Oakley란??**

디피헬만 베이스로 공통키 생성

<br/>

**💡 ISAKMP란??**

IPSec 보안 협상을 위한 프로토콜 스택.

IPSec 보안 협상을 시작하고, Oakley와 같은 키 교환 프로토콜을 관리함.

인증, 암호 알고리즘 선택, 보안 매개변수 협상 및 보안 협상 결과의 교환에 대한 규칙 정의
