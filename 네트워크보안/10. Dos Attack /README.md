## 📌 Dos Attack - 1

**💡 Dos Attack이란?**

시스템의 리소스를 낭비시키는 공격.

CPU 메모리, 네트워크 대역폭, 디스크 스페이스를 고갈시킨다.

<br/>

**💡 flooding ping command란??**

네트워크 연결 용량을 과부하로 만드는 것이 목표.

대량의 ping을 대상 시스템으로 전송

→ 대상 시스템은 유효한 트래픽을 처리하지 못하고 성능이 저하됨.

이 때 공격 소스는 스푸핑된 주소가 아닌 이상 명확하게 식별이 가능함.

→ 공격자 식별 가능!!!

<br/>

**💡 source address spoofing이란??**

일반적인 DoS 공격.

공격자가 대량의 SYN 패킷을 서버로 전송 → SYN Flood 공격 수행.

Attacker가 Server한테 Victim 척 위장해서 SYN을 보냄.

→ Server은 Victim한테 응답 ACK + SYN을 보냄.

→ Victim은 자기가 요청한게 아니기 때문에 그에 대한 ACK을 보내줄 수 없음.

→ Server은 응답 ACK이 오지 않으니까 다시 보냄.

→ ACK을 몇번 재전송하면서 대기하다가 fail처리함.

Server은 응답 ACK을 기다려야하기 때문에 다른 작업을 하지 못함.

→ 다른 작업들의 시간이 지연됨.

⇒ **`SYN Cookie`** 등의 방어 메커니즘 구현 필요!!!

<img src="https://github.com/JeeeunOh/Major-Study/assets/65931227/c376b969-fa9d-4644-ab13-0b29ddd34041" height="400px" width="700px">

<br/>

**💡 SYN Flood attacks의 세가지 방법??**

1. **Direct attack** : 공격자의 IP 주소 위조 X 직접 공격하는 것.
    
    → 쉽게 추적이 가능함.
    
2. **Spoofed attack** : 각 SYN 패킷마다 공격자의 IP 주소가 위조된 공격.
    
    → ISP 도움을 받아 소스를 추적할 수 있음.
    
3. **Distributed attack** : botnet을 이용해서 생성된 SYN Flood 공격.
    
    분산된 각 장치의 IP 주소도 위조가 가능 → 추적이 어려움.
    
    +) botnet : 악성 소프트웨어 / 악의적인 목적을 가진 개인 또는 조직에 의해 제어되는 컴퓨터 네트워크의 그룹.
    
<br/>

**💡 `TCP SYN Cookie`란???**

t : 타임스탬프. 서버에서 생성된 SYN 쿠키 유효성 확인 위해 넣음.

m : 최대 세그먼트 크기. MSS 값을 인코딩하여 넣어놓음. 서버는 클라이언트의 MSS 값 추정 가능.

s : MACk ( key k )는 서버만 알고 있고 공유되지 않은 키임.

→ 이 MAC이 들어있으면, 올바른 서버가 요청을 보낸게 맞다고 판단.

~~SYN 안에 시퀀스 넘버를 랜덤넘버(32 bit)로 넣어놓음.~~

- [syn cookie 설명 링크](https://brunch.co.kr/@alden/5)
    
    syncookies 기능을 켜게 되면 서버는 더 이상 SYN 패킷들을 SYN Backlog에 저장하지 않음.
    
    저장하지 않고 SYN 패킷에 있는 정보들을 이용해 syncookies라는 것을 만들고, 
    
    그 값을 SYN + ACK의 ISN으로 만들어서 클라이언트에게 다시 보냄. 
    
    정상적인 클라이언트라면 ACK을 보내게 될 것이고, 
    
    서버는 이 때 받은 ACK에서 Sequence Number를 추출해서 자신이 만들었던 숫자가 맞는지 검사를 하게 되고, 
    
    정상적인 패킷이라고 판단이 되면 Listen Backlog로 넘겨서 커넥션을 맺을 준비를 함.
    
<br/>

💡 **TCP SYN Cookie 이용해 검증하는 과정?**

서버는 TCP SYN 요청에 대해 새로운 TCB(TCP 연결 블록)을 생성하지 않고 조작된 SYN ACK을 응답함.

클라이언트가 이러한 조작된 응답에 응답하는(ACK을 보내는) 경우에만 해당 TCP 연결을 위한 TCB가 생성됨.

이를 통해 서버의 자원이 TCP SYN Flood 로 인해 가득차지 않도록 보호됨.

## 📌 Dos Attack - 2

**💡 Flooding Attacks?**

네트워크 용량 과부화시키기 위한 attack

<br/>

**💡 Distributed Denial of Service DDoS Attacks?**

attacker은 PC에 특정 시스템을 설치하고 접근 권한을 얻음 → 좀비 PC로 만듦!!!

DDoS 공격에는 이런 여러 개의 좀비 PC를 사용함.

<img src="https://github.com/JeeeunOh/Major-Study/assets/65931227/b191913e-f613-4f03-9a4f-b636f9a3d7f5" height="400px" width="700px">

<br/>

**💡 Session Initiation Protocol ( SIP ) Flood 란??**

SIP 프로토콜을 악용하여 네트워크에 과부하를 일으키는 공격 형태.

여러 대의 컴퓨터 또는 봇넷을 사용하여 수많은 SIP 요청을 대상 서버에 동시에 보냄.

→ 대량의 SIP Invite 요청을 생성하여 네트워크 대역폭을 차지하고 서버의 처리 능력을 고갈시킴.

<br/>

+) **SIP Protocol이란?** 

Voice over IP 통신을 위해 사용되는 프로토콜로, 음성통화, 영상통화 및 인스턴트 메시징과 같은 통신 서비스를 설정하고 관리하는데 사용됨.


<img src="https://github.com/JeeeunOh/Major-Study/assets/65931227/fbcc00bc-6e68-478c-95a4-a88be603efff" height="400px" width="700px">


**방법**

- **대량 SIP 요청 전송** : 서버의 처리 능력 초과시킴
- **스푸핑된 SIP 요청** : 대량의 스푸핑된 IP 요청
    
    → 대상 시스템은 응답을 보내야 할 실제 송신자를 찾는데 어려움.
    
- **무효한 SIP 패킷 생성** : 잘못된 SIP 메시지를 생성하여 대상 시스템으로 보냄으로써
    
    시스템 리소스 낭비시킴.
    

**목표** 

- DoS 상태 유발하는 것
    
    → 대상 서버의 자원 소모
    
<br/>

**💡 HTTP Based Attacks**

**💡 HTTP Flood란??**

대량의 HTTP 요청을 특정 웹 서버로 동시에 보내는 요청

→ CPU, 메모리, 대역폭 등 자원 고갈시킴

→ 서버는 정상적인 트래픽 처리 못함.

공격기법 )

- **`spidering`**
    
    주어진 HTTP 링크에서 시작하여 해당 웹사이트의 모든 링크를 재귀적으로 따라가는 봇을 이용하는 방법 
    
    - 공격자는 웹사이트를 크롤링하거나 스파이더링 소프트웨어를 사용하여 웹사이트의 링크를 따라갈 수 있음. 이에 공격자는 자동화된 스크립트나 도구를 사용하여 대량의 HTTP 요청을 생성하고 대상 서버로 보낼 수 있다.
<br/>

**💡Slowloris란??**

**웹 서버에 대한 지속적인 연결을 유지**하여 서비스를 마비시키는 공격.

한 대의 컴퓨터에서 실행되며, 공격자는 여러 개의 소켓 연결을 웹 서버에 생성함.

이 연결에서 일부 데이터를 지속적으로 보내어 연결을 연 상태로 유지

→ 공격자는 여러 대의 오픈 연결을 유지하면서 서버 리소스 소진시킴.

HTTP 트래픽을 이용하므로 일반적인 방화벽이나 ISP에서 쉽게 탐지하기 어려울 수 있음. 또한, 기존의 침입 탐지 및 방지 솔루션은 공격을 감지하기 위해 시그니처를 사용

→ Sloworis 탐지 어려울 수 있음.

<br/>

**💡 Reflection Attacks?**

중계 시스템을 이용하여 공격 트래픽을 목표 시스템으로 증폭시키는 DDoS 공격의 한 형태.

위조된 출발지 IP 주소를 사용하는 것이 특징.

ex. 포트번호 7 : echo → 수신한 것을 그대로 응답으로 돌려줌.

**과정 )**

1. 증폭에 이용될 수 있는 중계 시스템 식별. 이 중계 시스템은 DNS 등이 포함됨.
2. 공격자는 중계 시스템에 victim의 실제 IP주소와 위조된 출발지 IP주소를 가진 패킷을 전송함.
    
    → 공격 패킷이 출발지로부터 발송된 것처럼 보이게 됨.
    
3. 중계 시스템은 이런 패킷을 받으면 위조된 출발지 주소로 큰 응답을 보냄.
    
    → 이 응답은 원래 요청보다 훨씬 크기가 크며 결과적으로 공격 트래픽 증폭시킴.
    
4. 이 증폭된 응답은 목표 시스템으로 전송되어 그 네트워크 용량을 초과하고 서비스 거부 상태를 유발함.

목표 )

- 중계 시스템을 통해 목표 시스템으로 대량의 트래픽을 보내 원하는 대로 과부하를 유발하는 것
    
    → 중계 시스템은 이 공격을 감지하거나 경고하지 않도록 하기 위해 사용됨.
    

방어 방법 )

- 위조된 출발지 패킷 ( spoofed source packets )을 차단하는 것.

<img src="https://github.com/JeeeunOh/Major-Study/assets/65931227/2aac1986-e4dd-4e40-8f22-01fe85f7c7d5" height="400px" width="700px">

<br/>

**💡 DNS Amplification attacks?**

공격자가 합법적인 DNS 서버를 중계 시스템으로 사용하여 수행되는 공격.

과정 )

1. 공격자는 대상 시스템의 위조된 출발지 주소를 가진 일련의 DNS 요청을 포함하는 패킷 생성
2. 중계 시스템으로 설정된 합법적인 DNS 서버로 전송됨.
3. DNS 서버는 이런 요청을 처리하고 응답을 생성함. DNS의 동작 방식을 악용하여 작은 요청을 훨씬 큰 응답으로 변환함. 이 과정에서 증폭이 발생함.
4. 증폭된 응답은 대상 시스템으로 다시 전송되어 대량의 응답으로 이루어진 공격 트래픽이 대상 시스템을 빠르게 압도하게 됨.

목표 )

적은 양의 요청을 통해 대량의 응답을 생성하여 대상 시스템에 피해를 입히는 것.

이를 위해 공격자는 중계 시스템으로 합법적인 DNS 서버를 이용, DNS 증폭 특성을 악용

방어 방법 )

- 위조된 출발지 주소의 사용을 방지하는 것
    
    → ISP나 네트워크 관리자는 네트워크 경계에서 출발지 주소가 실제로 속한 네트워크와 일치하지 않는 패킷을 거부하거나 필터링하여 위조된 출발지 패킷을 차단함.
    
- **captcha**
    
    → 사람만 알아볼 수 있는 것들 고르게 함 like 신호등 골라라
    
    → 일그러진 숫자나 알파벳 써놓고 맞추게 함.
    
    **Q. 이걸로 어케 방어?????** 좀비 PC는 사람이 아니기 때문!!
    

비밀번호 연속적으로 세번 틀리면, captcha 넣는 식으로 방어 가능.

<img src="https://github.com/JeeeunOh/Major-Study/assets/65931227/5306bde2-89b6-48e3-9e9f-72bf2a29b61a" height="400px" width="700px">

<br/>

**💡 Dos Attack을 방지하는 방법??**

1. **스푸핑된 출발지 주소 차단** : 
    - 가능한 한 출발지에 가까운 라우터에서 스푸핑된 또는 위조된 출발지 IP 주소를 차단하도록 조치
2. **필터링을 사용하여 돌아가는 경로 확인** : 
    - 현재 패킷에서 사용되는 경로가 주장된 출발지 주소로 돌아가는지 확인하기 위해 필터를 사용할 수 있음.
        
        이러한 필터는 트래픽이 ISP 네트워크를 떠나기 전이나 네트워크 진입 지점에서 적용되어야 함.
        
3. **수정된 TCP 연결 처리 코드 사용** :
    - 서버의 초기 순서 번호로 전송되는 쿠키로 중요한 정보를 암호화하여 변경된 TCP 연결 처리 코드를 사용.
        
        합법적인 클라이언트는 순서 번호 쿠키를 포함한 ACK 패킷으로 응답함.
        
4. **TCP 연결 테이블 오버플로우 시 불완전한 연결 항목 삭제** :
    - TCP 연결 테이블이 오버플로우할 경우 불완전한 연결 항목을 삭제함.
        
        이를 통해 공격자가 대량의 불완전한 연결을 생성하여 리소스를 고갈시키는 것을 방지할 수 있음.
        
5.  **IP directed broadcasts 차단**
    - 네트워크의 모든 호스트에게 전송되는 패킷인 IP directed broadcasts을 차단
        
        → 공격자가 대량의 IP directed broadcasts을 이용하여 네트워크를 고갈시킬 수 있음.
        
        따라서, IP 방송을 차단하여 이러한 공격을 방지할 수 있음.
        
6. **수상한 서비스 및 조합 차단**
    
    → 의심스러운 서비스나 서비스 조합을 차단하는 것
    
7. **CAPTCHA를 이용한 방지**
8. **일반적인 시스템 보안 관행**
    
    → 암호 강도 강화, 업데이트 및 보안 패치 관리, 방화벽 설정 등을 지키기
    
9. **고성능 및 신뢰성 요구 시 미러링 및 복제 서버 사용**
    
    → 고성능과 신뢰성이 요구되는 경우 미러링 및 복제 서버 사용함.
    
    → 트래픽 분산과 장애 복구를 지원하여 공격에 대한 영향을 최소화하고 서비스의 지속성을 보장함.
    
10. **공격 유형 식별:** 
    
    공격 유형을 식별하기 위해 패킷을 캡처하고 분석
    
    → 공격 트래픽을 차단하는 필터를 설계 or 시스템/응용 프로그램 버그를 식별 & 수정 가능
    
11. **ISP가 소스로부터 패킷 흐름 추적:** 
    
    → 시간과 노력이 소요될 수 있으며, 법적 조치를 계획하는 경우 필요할 수 있습니다.
    
12. **대응 계획 실행:** 
    
    대안 백업 서버로 전환 / 새로운 주소로 새로운 사이트에서 새로운 서버를 운영 & 대응 계획 실행
    
    → 공격에 대한 영향을 최소화하고 서비스의 연속성을 유지할 수 있습니다.
    
13. **사건 대응 계획 업데이트:** 
    
    공격과 대응을 분석 → 미래 대응을 위한 사건 대응 계획을 업데이트
